{"ast":null,"code":"/*\nCopyright 2023 Certified CoderZ\nAuthor: certifiedcoderz@gmail.com (Certified CoderZ)\nLicense GNU General Public License v3.0\nDescription: BiZ9 Framework: Logic - Main\n*/\n\nconst {\n  DateTime,\n  Number\n} = require('biz9-utility');\nconst biz9_config_local = __dirname + \"/../../\" + \"biz9_config\";\nconst get_cloud_filter_obj_main = (data_type, filter, sort_by, page_current, page_size) => {\n  return {\n    data_type: data_type,\n    filter: filter,\n    sort_by: sort_by,\n    page_current: page_current,\n    page_size: page_size\n  };\n};\nconst get_new_item_main = (data_type, id) => {\n  if (!id) {\n    id = 0;\n  }\n  return {\n    data_type: data_type,\n    id: id\n  };\n};\nconst get_cloud_url_main = (app_title_id, domain_url, action_url, params) => {\n  if (!params) {\n    params = '';\n  }\n  var app_title_id_url = '?app_title_id=' + app_title_id;\n  return domain_url + \"/\" + action_url + app_title_id_url + params;\n};\nconst get_biz_item_main = (biz9_config, item, options) => {\n  /*\n  -options {\n      get_count: true/false, false=default --\n      get_date: true/false, false=default --\n      get_biz_map: true/false, false=default --\n      get_money: true/false, false=default --\n  }\n  */\n  //money setting - start\n  if (options.get_money) {\n    if (isNaN(item.cost)) {\n      item.cost = parseFloat(0.00);\n    }\n    if (isNaN(item.old_cost)) {\n      item.old_cost = parseFloat(0.00);\n    }\n    if (isNaN(item.discount)) {\n      item.discount = parseFloat(0.00);\n    }\n    discount = item.old_cost - item.cost;\n    item.discount = parseInt(discount / item.old_cost * 100);\n    if (isNaN(item.discount)) {\n      item.discount = \"0%\";\n    } else {\n      item.discount = item.discount + \"%\";\n    }\n    item.cost = Number.get_money(item.cost);\n    item.old_cost = Number.get_money(item.old_cost);\n  }\n  //money setting - end\n\n  //count setting - start\n  if (options.get_count) {\n    if (!item.view_count) {\n      item.view_count = '0';\n    }\n    if (!item.like_count) {\n      item.like_count = '0';\n    }\n    if (!item.review_count) {\n      item.review_count = '0';\n    }\n  }\n  //count setting - end\n  //date setting - start\n  if (options.get_date) {\n    let no_date_str = '';\n    if (!item.date_create) {\n      item.date_create = DateTime.get_new_date();\n      item.date_save = DateTime.get_new_date();\n    }\n    item = {\n      pretty_create: item.date_create ? DateTime.get_pretty(item.date_create) : no_date_str,\n      pretty_update: item.date_create ? DateTime.get_pretty(item.date_save) : no_date_str,\n      full_date_create: item.date_create ? DateTime.get_date_str(item.date_create) : no_date_str,\n      full_date_update: item.date_create ? DateTime.get_date_str(item.date_save) : no_date_str,\n      full_date_time_create: item.date_create ? DateTime.get_str(item.date_create) : no_date_str,\n      full_date_time_update: item.date_create ? DateTime.get_str(item.date_save) : no_date_str,\n      month_create: item.date_create ? DateTime.get_month_title(1 + DateTime.get_obj(item.date_create).month()) : no_date_str,\n      month_update: item.date_create ? DateTime.get_month_title(1 + DateTime.get_obj(item.date_save).month()) : no_date_str,\n      mo_create: item.date_create ? 1 + DateTime.get_obj(item.date_create).month() : no_date_str,\n      mo_update: item.date_create ? 1 + DateTime.get_obj(item.date_save).month() : no_date_str,\n      date_create: item.date_create ? DateTime.get_obj(item.date_create).date() : no_date_str,\n      year_create: item.date_create ? DateTime.get_obj(item.date_create).year() : no_date_str,\n      year_update: item.date_create ? DateTime.get_obj(item.date_save).year() : no_date_str,\n      time_create: item.date_create ? DateTime.get_time_str(item.date_create) : no_date_str,\n      time_update: item.date_create ? DateTime.get_time_str(item.date_save) : no_date_str\n    };\n  }\n  //date setting - end\n  //biz_map setting - start\n  if (options.get_biz_map) {\n    for (let a = 0; a < 20; a++) {\n      if (item['field_' + a]) {\n        item[item['field_' + a]] = item['value_' + a];\n      }\n    }\n  }\n  //biz_map setting - end\n  return item;\n};\nconst get_title_url_main = title => {\n  if (!title) {\n    title = '';\n  }\n  return title.replace(/[^a-z0-9]+/ig, \"_\").toLowerCase();\n};\nmodule.exports = {\n  get_new_item_main,\n  get_cloud_url_main,\n  get_cloud_filter_obj_main,\n  get_title_url_main,\n  get_biz_item_main\n};","map":{"version":3,"names":["DateTime","Number","require","biz9_config_local","__dirname","get_cloud_filter_obj_main","data_type","filter","sort_by","page_current","page_size","get_new_item_main","id","get_cloud_url_main","app_title_id","domain_url","action_url","params","app_title_id_url","get_biz_item_main","biz9_config","item","options","get_money","isNaN","cost","parseFloat","old_cost","discount","parseInt","get_count","view_count","like_count","review_count","get_date","no_date_str","date_create","get_new_date","date_save","pretty_create","get_pretty","pretty_update","full_date_create","get_date_str","full_date_update","full_date_time_create","get_str","full_date_time_update","month_create","get_month_title","get_obj","month","month_update","mo_create","mo_update","date","year_create","year","year_update","time_create","get_time_str","time_update","get_biz_map","a","get_title_url_main","title","replace","toLowerCase","module","exports"],"sources":["/home/think2/www/projectz/901/src/code/corp-react/node_modules/biz9-logic/main.js"],"sourcesContent":["/*\nCopyright 2023 Certified CoderZ\nAuthor: certifiedcoderz@gmail.com (Certified CoderZ)\nLicense GNU General Public License v3.0\nDescription: BiZ9 Framework: Logic - Main\n*/\n\nconst { DateTime,Number } = require('biz9-utility');\nconst biz9_config_local=__dirname+\"/../../\"+\"biz9_config\";\n\nconst get_cloud_filter_obj_main = (data_type,filter,sort_by,page_current,page_size) => {\n    return {data_type:data_type,filter:filter,sort_by:sort_by,page_current:page_current,page_size:page_size};\n}\nconst get_new_item_main = (data_type,id) => {\n    if(!id){\n        id=0;\n    }\n    return {data_type:data_type,id:id};\n}\nconst get_cloud_url_main = (app_title_id,domain_url,action_url,params) =>{\n    if(!params){\n        params='';\n    }\n    var app_title_id_url='?app_title_id='+app_title_id;\n    return domain_url+\"/\"+action_url+app_title_id_url + params;\n}\nconst get_biz_item_main=(biz9_config,item,options) =>{\n    /*\n    -options {\n        get_count: true/false, false=default --\n        get_date: true/false, false=default --\n        get_biz_map: true/false, false=default --\n        get_money: true/false, false=default --\n    }\n    */\n    //money setting - start\n    if(options.get_money){\n        if(isNaN(item.cost)){\n            item.cost=parseFloat(0.00);\n        }\n        if(isNaN(item.old_cost)){\n            item.old_cost=parseFloat(0.00);\n        }\n        if(isNaN(item.discount)){\n            item.discount=parseFloat(0.00);\n        }\n        discount = item.old_cost - item.cost;\n        item.discount= parseInt(((discount / item.old_cost) * 100));\n        if(isNaN(item.discount)){\n            item.discount=\"0%\";\n        }else{\n            item.discount=item.discount+\"%\";\n        }\n        item.cost = Number.get_money(item.cost);\n        item.old_cost = Number.get_money(item.old_cost);\n    }\n    //money setting - end\n\n    //count setting - start\n    if(options.get_count){\n        if(!item.view_count){\n            item.view_count='0';\n        }\n        if(!item.like_count){\n            item.like_count='0';\n        }\n        if(!item.review_count){\n            item.review_count='0';\n        }\n    }\n    //count setting - end\n    //date setting - start\n    if(options.get_date){\n        let no_date_str='';\n        if(!item.date_create){\n            item.date_create = DateTime.get_new_date();\n            item.date_save = DateTime.get_new_date();\n        }\n        item={\n            pretty_create: (item.date_create) ? DateTime.get_pretty(item.date_create) : no_date_str,\n            pretty_update: (item.date_create) ? DateTime.get_pretty(item.date_save): no_date_str,\n            full_date_create: (item.date_create) ? DateTime.get_date_str(item.date_create) : no_date_str,\n            full_date_update: (item.date_create) ? DateTime.get_date_str(item.date_save) : no_date_str,\n            full_date_time_create: (item.date_create) ? DateTime.get_str(item.date_create) : no_date_str,\n            full_date_time_update: (item.date_create) ? DateTime.get_str(item.date_save) : no_date_str,\n            month_create: (item.date_create) ? DateTime.get_month_title(1+DateTime.get_obj(item.date_create).month()) : no_date_str,\n            month_update: (item.date_create) ? DateTime.get_month_title(1+DateTime.get_obj(item.date_save).month()) : no_date_str,\n            mo_create: (item.date_create) ? (1+DateTime.get_obj(item.date_create).month()) : no_date_str,\n            mo_update: (item.date_create) ? (1+DateTime.get_obj(item.date_save).month()) : no_date_str,\n            date_create: (item.date_create) ? DateTime.get_obj(item.date_create).date() : no_date_str,\n            year_create: (item.date_create) ? DateTime.get_obj(item.date_create).year() : no_date_str,\n            year_update: (item.date_create) ? DateTime.get_obj(item.date_save).year() : no_date_str,\n            time_create: (item.date_create) ? DateTime.get_time_str(item.date_create) : no_date_str,\n            time_update: (item.date_create) ? DateTime.get_time_str(item.date_save) : no_date_str,\n        }\n    }\n    //date setting - end\n    //biz_map setting - start\n    if(options.get_biz_map){\n        for(let a=0;a<20;a++){\n            if(item['field_'+a]){\n                item[item['field_'+a]]=item['value_'+a];\n            }\n        }\n    }\n    //biz_map setting - end\n    return item;\n}\nconst get_title_url_main = (title) => {\n    if(!title){\n        title='';\n    }\n    return title.replace(/[^a-z0-9]+/ig, \"_\").toLowerCase();\n}\n\nmodule.exports = {\n    get_new_item_main,\n    get_cloud_url_main,\n    get_cloud_filter_obj_main,\n    get_title_url_main,\n    get_biz_item_main\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA,QAAQ;EAACC;AAAO,CAAC,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnD,MAAMC,iBAAiB,GAACC,SAAS,GAAC,SAAS,GAAC,aAAa;AAEzD,MAAMC,yBAAyB,GAAGA,CAACC,SAAS,EAACC,MAAM,EAACC,OAAO,EAACC,YAAY,EAACC,SAAS,KAAK;EACnF,OAAO;IAACJ,SAAS,EAACA,SAAS;IAACC,MAAM,EAACA,MAAM;IAACC,OAAO,EAACA,OAAO;IAACC,YAAY,EAACA,YAAY;IAACC,SAAS,EAACA;EAAS,CAAC;AAC5G,CAAC;AACD,MAAMC,iBAAiB,GAAGA,CAACL,SAAS,EAACM,EAAE,KAAK;EACxC,IAAG,CAACA,EAAE,EAAC;IACHA,EAAE,GAAC,CAAC;EACR;EACA,OAAO;IAACN,SAAS,EAACA,SAAS;IAACM,EAAE,EAACA;EAAE,CAAC;AACtC,CAAC;AACD,MAAMC,kBAAkB,GAAGA,CAACC,YAAY,EAACC,UAAU,EAACC,UAAU,EAACC,MAAM,KAAI;EACrE,IAAG,CAACA,MAAM,EAAC;IACPA,MAAM,GAAC,EAAE;EACb;EACA,IAAIC,gBAAgB,GAAC,gBAAgB,GAACJ,YAAY;EAClD,OAAOC,UAAU,GAAC,GAAG,GAACC,UAAU,GAACE,gBAAgB,GAAGD,MAAM;AAC9D,CAAC;AACD,MAAME,iBAAiB,GAACA,CAACC,WAAW,EAACC,IAAI,EAACC,OAAO,KAAI;EACjD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACA,IAAGA,OAAO,CAACC,SAAS,EAAC;IACjB,IAAGC,KAAK,CAACH,IAAI,CAACI,IAAI,CAAC,EAAC;MAChBJ,IAAI,CAACI,IAAI,GAACC,UAAU,CAAC,IAAI,CAAC;IAC9B;IACA,IAAGF,KAAK,CAACH,IAAI,CAACM,QAAQ,CAAC,EAAC;MACpBN,IAAI,CAACM,QAAQ,GAACD,UAAU,CAAC,IAAI,CAAC;IAClC;IACA,IAAGF,KAAK,CAACH,IAAI,CAACO,QAAQ,CAAC,EAAC;MACpBP,IAAI,CAACO,QAAQ,GAACF,UAAU,CAAC,IAAI,CAAC;IAClC;IACAE,QAAQ,GAAGP,IAAI,CAACM,QAAQ,GAAGN,IAAI,CAACI,IAAI;IACpCJ,IAAI,CAACO,QAAQ,GAAEC,QAAQ,CAAGD,QAAQ,GAAGP,IAAI,CAACM,QAAQ,GAAI,GAAI,CAAC;IAC3D,IAAGH,KAAK,CAACH,IAAI,CAACO,QAAQ,CAAC,EAAC;MACpBP,IAAI,CAACO,QAAQ,GAAC,IAAI;IACtB,CAAC,MAAI;MACDP,IAAI,CAACO,QAAQ,GAACP,IAAI,CAACO,QAAQ,GAAC,GAAG;IACnC;IACAP,IAAI,CAACI,IAAI,GAAGxB,MAAM,CAACsB,SAAS,CAACF,IAAI,CAACI,IAAI,CAAC;IACvCJ,IAAI,CAACM,QAAQ,GAAG1B,MAAM,CAACsB,SAAS,CAACF,IAAI,CAACM,QAAQ,CAAC;EACnD;EACA;;EAEA;EACA,IAAGL,OAAO,CAACQ,SAAS,EAAC;IACjB,IAAG,CAACT,IAAI,CAACU,UAAU,EAAC;MAChBV,IAAI,CAACU,UAAU,GAAC,GAAG;IACvB;IACA,IAAG,CAACV,IAAI,CAACW,UAAU,EAAC;MAChBX,IAAI,CAACW,UAAU,GAAC,GAAG;IACvB;IACA,IAAG,CAACX,IAAI,CAACY,YAAY,EAAC;MAClBZ,IAAI,CAACY,YAAY,GAAC,GAAG;IACzB;EACJ;EACA;EACA;EACA,IAAGX,OAAO,CAACY,QAAQ,EAAC;IAChB,IAAIC,WAAW,GAAC,EAAE;IAClB,IAAG,CAACd,IAAI,CAACe,WAAW,EAAC;MACjBf,IAAI,CAACe,WAAW,GAAGpC,QAAQ,CAACqC,YAAY,CAAC,CAAC;MAC1ChB,IAAI,CAACiB,SAAS,GAAGtC,QAAQ,CAACqC,YAAY,CAAC,CAAC;IAC5C;IACAhB,IAAI,GAAC;MACDkB,aAAa,EAAGlB,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACwC,UAAU,CAACnB,IAAI,CAACe,WAAW,CAAC,GAAGD,WAAW;MACvFM,aAAa,EAAGpB,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACwC,UAAU,CAACnB,IAAI,CAACiB,SAAS,CAAC,GAAEH,WAAW;MACpFO,gBAAgB,EAAGrB,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC2C,YAAY,CAACtB,IAAI,CAACe,WAAW,CAAC,GAAGD,WAAW;MAC5FS,gBAAgB,EAAGvB,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC2C,YAAY,CAACtB,IAAI,CAACiB,SAAS,CAAC,GAAGH,WAAW;MAC1FU,qBAAqB,EAAGxB,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC8C,OAAO,CAACzB,IAAI,CAACe,WAAW,CAAC,GAAGD,WAAW;MAC5FY,qBAAqB,EAAG1B,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC8C,OAAO,CAACzB,IAAI,CAACiB,SAAS,CAAC,GAAGH,WAAW;MAC1Fa,YAAY,EAAG3B,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACiD,eAAe,CAAC,CAAC,GAACjD,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACe,WAAW,CAAC,CAACe,KAAK,CAAC,CAAC,CAAC,GAAGhB,WAAW;MACvHiB,YAAY,EAAG/B,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACiD,eAAe,CAAC,CAAC,GAACjD,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACiB,SAAS,CAAC,CAACa,KAAK,CAAC,CAAC,CAAC,GAAGhB,WAAW;MACrHkB,SAAS,EAAGhC,IAAI,CAACe,WAAW,GAAK,CAAC,GAACpC,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACe,WAAW,CAAC,CAACe,KAAK,CAAC,CAAC,GAAIhB,WAAW;MAC5FmB,SAAS,EAAGjC,IAAI,CAACe,WAAW,GAAK,CAAC,GAACpC,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACiB,SAAS,CAAC,CAACa,KAAK,CAAC,CAAC,GAAIhB,WAAW;MAC1FC,WAAW,EAAGf,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACe,WAAW,CAAC,CAACmB,IAAI,CAAC,CAAC,GAAGpB,WAAW;MACzFqB,WAAW,EAAGnC,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACe,WAAW,CAAC,CAACqB,IAAI,CAAC,CAAC,GAAGtB,WAAW;MACzFuB,WAAW,EAAGrC,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAACkD,OAAO,CAAC7B,IAAI,CAACiB,SAAS,CAAC,CAACmB,IAAI,CAAC,CAAC,GAAGtB,WAAW;MACvFwB,WAAW,EAAGtC,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC4D,YAAY,CAACvC,IAAI,CAACe,WAAW,CAAC,GAAGD,WAAW;MACvF0B,WAAW,EAAGxC,IAAI,CAACe,WAAW,GAAIpC,QAAQ,CAAC4D,YAAY,CAACvC,IAAI,CAACiB,SAAS,CAAC,GAAGH;IAC9E,CAAC;EACL;EACA;EACA;EACA,IAAGb,OAAO,CAACwC,WAAW,EAAC;IACnB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,EAAE,EAACA,CAAC,EAAE,EAAC;MACjB,IAAG1C,IAAI,CAAC,QAAQ,GAAC0C,CAAC,CAAC,EAAC;QAChB1C,IAAI,CAACA,IAAI,CAAC,QAAQ,GAAC0C,CAAC,CAAC,CAAC,GAAC1C,IAAI,CAAC,QAAQ,GAAC0C,CAAC,CAAC;MAC3C;IACJ;EACJ;EACA;EACA,OAAO1C,IAAI;AACf,CAAC;AACD,MAAM2C,kBAAkB,GAAIC,KAAK,IAAK;EAClC,IAAG,CAACA,KAAK,EAAC;IACNA,KAAK,GAAC,EAAE;EACZ;EACA,OAAOA,KAAK,CAACC,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC,CAACC,WAAW,CAAC,CAAC;AAC3D,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG;EACb1D,iBAAiB;EACjBE,kBAAkB;EAClBR,yBAAyB;EACzB2D,kBAAkB;EAClB7C;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}